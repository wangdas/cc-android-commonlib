apply plugin: 'com.android.library'
//apply plugin: 'maven'
apply plugin: 'com.github.dcendents.android-maven'
group='com.github.wangdas'

android {
    compileSdkVersion rootProject.ext.compileSdkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion
    defaultConfig {
        minSdkVersion rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion
        buildConfigField "String", "CommonLibVersion", "\"${getProperty("gradle.properties", "CommonLibVersion")}\""
    }

    buildTypes {
        //调试环境
        debug {
            //混淆
            minifyEnabled false
            //混淆规则
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            //Zipalign优化
            zipAlignEnabled true
        }
        //线上环境
        release {
            //混淆
            minifyEnabled true
            //混淆规则
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            //Zipalign优化
            zipAlignEnabled true

        }
    }

    lintOptions {
        abortOnError false
    }

//    afterEvaluate {
//        publishing {
//            publications {
//                release(MavenPublication) {
//                    from components.release
//
//                    groupId = 'com.bokecc'
//                    artifactId = 'commonLib'
//                    version = '1.0.0'
//                }
//                debug(MavenPublication) {
//                    from components.debug
//
//                    groupId = 'com.bokecc'
//                    artifactId = 'commonLib'
//                    version = '1.0.0'
//                }
//            }
//        }
//    }

}

dependencies {

}


def getProperty(String filename, String propName) {
    def propsFile = rootProject.file(filename)
    if (propsFile.exists()) {
        def props = new Properties()
        props.load(new FileInputStream(propsFile))
        if (props[propName] != null) {
            return props[propName]
        } else {
            print("No such property " + propName + " in file " + filename)
        }
    } else {
        print(filename + " does not exist!")
    }
}
// 配置上传指令
//uploadArchives {
//    configuration = configurations.archives
//    repositories {
//        mavenDeployer {
//            repository(url: MAVEN_URL) {
//                authentication(userName: NEXUS_USERNAME, password: NEXUS_PASSWORD)
//            }
//            pom.project {
//                artifactId 'commonLib'
//                groupId 'com.bokecc'
//                packaging 'aar'
//                version CommonLibVersion
//                description CommonLibDESCRIPTION
//            }
//        }
//    }
//}
